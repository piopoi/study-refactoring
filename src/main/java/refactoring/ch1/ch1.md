# Chapter 01 - 리팩터링: 첫 번째 예시

### 리팩터링 vs 성능 개선 (p.47)

- 저자는 리팩터링이 성능에 영향을 주는 것을 알고 있음에도 일단 리팩터링 하는 것을 우선한다고 한다.
- 리팩터링 과정에서 성능이 크게 떨어졌다면, 리팩터링 후에 시간을 내서 성능을 개선하면 되기 때문이라고 얘기한다.
- 이 부분은 상황에 따라 다르게 봐야 할 것 같다.
- 어떤 프로젝트에서는 기능 구현만 해도 시간이 빠듯한 경우가 많은데, 이런 경우 성능을 제쳐두고 리팩토링을 우선하기는 쉽지 않기 때문이다.

### 왜 enrichPerformance()로 얕은 복사할 필요가 있는가? with ChatGPT (p.55)
- `enrichPerformance()`에서는 얕은 복사(Shallow Copy)를 수행하여 Performance 객체의 필드 값만 복사한다.
- 원본 데이터를 보호:
    - `invoice.performances`는 원본 데이터이므로, 직접 수정하면 원치 않는 부작용(side effect)이 발생할 수 있습니다.
    - `enrichPerformance()`를 통해 복사본을 사용하면, 원본 데이터는 변경되지 않습니다.
- 확장성 제공:
    - 복사된 Performance 객체에 새로운 속성을 추가하거나, 특정 로직을 적용할 수 있습니다.
    - 예를 들어, Performance 객체에 계산된 값을 추가하거나, 포맷팅된 데이터를 포함할 수 있습니다.
- 객체 지향 원칙 준수:
    - 데이터와 로직을 분리하여, Performance 객체가 명확한 책임을 가지도록 합니다.
